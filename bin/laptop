#!/bin/sh

set -e

sudo dnf update -y

# Enable the RPM Fusion repositories
sudo dnf install -y \
  https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm

sudo dnf install -y \
  https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm

# Enable Appstream data from the RPM Fusion repositories
sudo dnf groupupdate -y core

# Packages
# Alacritty terminal
sudo dnf copr enable -y pschyska/alacritty
sudo dnf install -y alacritty
# Ag
sudo dnf install -y the_silver_searcher
# ripgrep
sudo dnf install -y ripgrep
# Neovim
sudo dnf copr enable -y agriffis/neovim-nightly
sudo dnf install -y neovim python{2,3}-neovim
# vim-plug
curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs \
  https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
# git/hub
sudo dnf install -y git
sudo dnf install -y hub
# fzf
sudo dnf install -y fzf
# rcm
sudo dnf install -y rcm
# asdf-vm
git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.7.3
sudo dnf install -y \
  automake autoconf readline-devel \
  ncurses-devel openssl-devel libyaml-devel \
  libxslt-devel libffi-devel libtool unixODBC-devel \
  unzip curl
source $HOME/.zshrc
asdf-update
asdf plugin-add ruby
asdf plugin-add nodejs
asdf plugin-add python
# IBM Plex Mono
curl -s https://api.github.com/repos/IBM/plex/releases/latest \
  | grep "browser_download_url.*OpenType.\zip" \
  | cut -d '"' -f 4 \
  | wget -qi -
unzip OpenType.zip
mv OpenType/IBM-Plex-Mono ~/.fonts
# bat
sudo dnf install -y bat
# tmux (Press prefix + I (capital i, as in Install) to fetch the plugin)
sudo dnf install -y tmux
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
tmux source ~/.tmux.conf
# snap
sudo dnf install -y snapd
